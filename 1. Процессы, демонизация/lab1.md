# Создание демонов в системе linux
## Описание
С помощью технологии fork написать программу на языке С++, которая будет запускаться
как фоновый процесс(daemon), которая периодически через заданный интервал времени выполняет требуемые действия с 
содержимым одного или двух каталогов на компьютере. Каталог(и) и интервал между действиями задаются в конфигурационном 
файле. Конфигурационный файлизначально лежит в рабочей папке при запуске, затем программа должна запоминать его 
абсолютный путь для дальнейшего использования. Формат конфигурационного файла выбирается на усмотрение автора.

Необходимо предусмотреть обработку сигналов. По сигналу SIGHUP программа должна перечитать конфигурационный файл. По 
сигналу SIGTERM программа должна вывести в системный журнал сообщение о выходе и завершить работу. Включение, сообщения 
об ошибках или завершении работы программы должны регистрироваться в системном журнале. Для работы с системным журналом 
используйте функции openlog, syslog, closelog. Демон должен быть защищен от повторного запуска с помощью pid-файла - 
при запуске демона, новый процесс должен смотреть в pid файл, затем проверять наличие процесса, указанного в нем с 
помощью системы “/proc”, если процесс с таким pid существует, ему должен быть отправлен сигнал SIGTERM, после чего 
новый процесс записывает свой pid после демонизации. 

Класс демона должен быть синглтоном, поскольку такова сущность самого демона: он существует в единственном экземпляре.

## Сборка 
Программа должна собираться из исходников с помощью скрипта build.sh, который автоматически компилирует исходные файлы 
в один исполняемый файл. Исходные файлы должны компилироваться с флагами -Wall и –Werror. Внутри скрипта можно вызывать 
g++ напрямую, или же пользоваться утилитой make или cmake. Скрипт должен автоматически очищать за собой промежуточные 
файлы.

## Варианты заданий
 Номер |                                                                                                                                                                                         Действие                                                                                                                                                                                         | Интервал (сек) | Баллы |
|:------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|---------------:|------:|
| 1     |                                                                                                                            Синхронизировать содержимое папок 1 и 2.В папку 2 помещается содержимое папки 1. Кроме него в папке 2 не должно ничего находиться                                                                                                                             |             30 |     5 |
| 2     |                                                                                                                                         Удалять содержимое папки 1, если в ней отсутствует файл dont.erase, в противном случае не делать ничего                                                                                                                                          |             15 |     5 |
| 3     |                                                                                                                                                                     Удалять все файлы папки 1 с расширением “*.tmp”                                                                                                                                                                      |             10 |     5 |
| 4     |                                                                                                                  Помещать в корень папки 1 файл, содержащий список MD5 сумм всех файлов (кроме самого себя) папки в формате {имя файла MD5} (порядок не имеет значения)                                                                                                                  |             15 |     5 |
| 5     |                                                                                                                                                               Удалять все файлы папки 1, возраст которых превышает минуту                                                                                                                                                                |            120 |     5 |
| 6     |                                                                                                                                                       Перемещать из папки 1 в папку 2 все файлы, возраст которых больше двух минут                                                                                                                                                       |             60 |     5 |
| 7     |                                                                                                                                                                               Удалять все подпапки папки 1                                                                                                                                                                               |             20 |    10 |
| 8     |                                                                                                                                         Копировать из папки 1 в папку 2 все файлы с расширением “*.bk”, предварительно очищая содержимое папки 2                                                                                                                                         |             30 |    10 |
| 9     |                                                                                       Копировать содержимое папки 1 в папку 2(предварительно очищая содержимое папки 2) следующим образом: файлы с расширением “*.png” должны помещаться в подпапку “IMG” папки 2, остальные — в подпапку “OTHERS”                                                                                       |             60 |    10 |
| 10    |                                                                                                                            Вести в папке 2 протокол содержимого папки 1: дописывать в файл “hist.log” текущее время и список всех файлов и подпапок папки 1.                                                                                                                             |             30 |    10 |
| 11    |                                                                                                               Копировать содержимое папки 1 в папку 2 следующим образом: файлы старше трех минут должны помещаться в подпапку “OLD” папки 2, остальные — в подпапку “NEW”                                                                                                                |             60 |    10 |
| 12    |                                                                                                                Перемещает из папки 1 в папку 2 все файлы, возраст которых превышает 10 минут, а из папки 2 в папку 1 — перемещает файлы, возраст которых меньше 10 минут                                                                                                                 |             30 |    10 |
| 13    |                                       Удаляет все файлы “*.log” из папки 1, предварительно дописывая их содержимое в файл “total.log” папки 2(перед записью содержимого, в “total.log” добавляются две пустые строки, пишется имя обрабатываемого файла из папки 1, пропускается еще одна строка и уже потом записывается содержимое файла папки 1                                       |             45 |    10 |
| 14    |                                                                                    Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder ignfile. Удалять содержимое папки folder, если в ней отсутствует файл ignfile, в противном случае не делать ничего                                                                                     |             20 |    12 |
| 15    |                                                                                                  Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder1 folder2 time. Содержимое папки folder1 перемещается в папку folder2 каждые time секунд                                                                                                  |              - |    12 |
| 16    |                                                                             Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder1 folder2 ext. Копировать из folder1 в папку folder2 все файлы с расширением “ext”, предварительно очищая содержимое папки folder2                                                                             |             30 |    12 |
| 17    |               Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder1 folder2 ext subfolder. Копировать содержимое папки folder1 в папку folder2 (предварительно очищая содержимое папки folder2) следующим образом: файлы с расширением ext должны помещаться в подпапку subfolder папки folder2, остальные — в подпапку “OTHERS”               |             60 |    12 |
| 18    |                                                                                                             Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder depth. Удалять все подпапки папки folder вплоть до глубины depth                                                                                                              |             20 |    13 |
| 19    | Напоминалка. В конфигурационный файл пользователь может добавлять с помощью специального скрипта новые события для напоминания в формате “add_event date time [flag] text”, где flag - необязательное поле, значения “-h -d -w” означают повтор напоминаний каждый час, день, неделю, соответственно. В указанное время демон должен открывать новый терминал и выводить заданный текст. |             10 |    15 |
| 20    |                                                                                               Disk monitor. Отслеживать использование файлов в указанных в конфигурационном файле папках (inotify), записывать каждый акт взаимодействия в отдельный log-файл (настроить свой LOG_LOCAL0).                                                                                               |              - |    15 |
| 21    |                                                                                                                                    Записывать в файл size.log папки 2 время и размер хранимых в папке 1 данных, очищать папку 1 после каждой итерации                                                                                                                                    |             30 |    10 |
| 22    |                                                                                                                                                                   Удалять все подпапки папки 1 вплоть до глубины depth                                                                                                                                                                   |             60 |    10 |
| 23    |                                                                                             Пользователь задает конфигурационный файл, состоящий из произвольного числа строк вида folder ext. Для каждой folder записывать в лог файл время, название файлов с расширением ext и их размер.                                                                                             |             20 |    12 |
| 24    |                                                                                                Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder size. Удалять содержимое папки folder, если суммарный размер ее содержимого превышает size                                                                                                 |             30 |    12 |
| 25    |                                                                                                    Пользователь задаёт конфигурационный файл, состоящий из произвольного числа строк вида: folder1 folder2 ext. Перемещать из folder1 в folder2 файлы с расширением отличным от ext.                                                                                                     |             20 |    12 |
